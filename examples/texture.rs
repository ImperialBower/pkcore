use clap::Parser;
use pkcore::arrays::matchups::masked::Masked;
use pkcore::{PKError, Shifty};
use std::str::FromStr;

#[derive(Parser, Debug)]
#[clap(author, version, about, long_about = None)]
struct Args {
    #[clap(short = 'd', long)]
    dealt: String,
}

/// `cargo run --example texture -- -d "A♥ A♦ A♣ K♥"`
fn main() -> Result<(), PKError> {
    let now = std::time::Instant::now();
    let args = Args::parse();

    let cards = Masked::from_str(&*args.dealt)?;

    println!("{cards}");

    for shift in cards.shifts() {
        println!(" * {shift}");
    }

    println!("Elapsed: {:.2?}", now.elapsed());
    Ok(())
}

// ❯ cargo run --example texture -- -d "8♠ 2♦ 3♥ 3♦"
// 8♠ 2♦ - 3♥ 3♦ Type1223d 1010,0110 0000001000001,0000000000010
//  * 8♥ 2♦ - 3♠ 3♦ Type1223d 0110,1010 0000001000001,0000000000010
//  * 8♣ 2♦ - 3♥ 3♦ Type1223d 0011,0110 0000001000001,0000000000010
//  * 8♦ 2♣ - 3♥ 3♣ Type1223d 0011,0101 0000001000001,0000000000010
//  * 8♠ 2♦ - 3♥ 3♦ Type1223d 1010,0110 0000001000001,0000000000010
//  * 8♣ 2♥ - 3♠ 3♥ Type1223d 0101,1100 0000001000001,0000000000010
//  * 8♦ 2♣ - 3♠ 3♣ Type1223d 0011,1001 0000001000001,0000000000010
//  * 8♥ 2♣ - 3♠ 3♣ Type1223d 0101,1001 0000001000001,0000000000010
//  * 8♣ 2♦ - 3♠ 3♦ Type1223d 0011,1010 0000001000001,0000000000010
//  * 8♥ 2♣ - 3♦ 3♣ Type1223d 0101,0011 0000001000001,0000000000010
//  * 8♠ 2♣ - 3♦ 3♣ Type1223d 1001,0011 0000001000001,0000000000010
//  * 8♦ 2♥ - 3♠ 3♥ Type1223d 0110,1100 0000001000001,0000000000010
//  * 8♠ 2♣ - 3♥ 3♣ Type1223d 1001,0101 0000001000001,0000000000010

// ❯ cargo run --example texture -- -d "8♠ 2♥ 3♥ 3♦"
// 8♠ 2♥ - 3♥ 3♦ Type1223c 1100,0110 0000001000001,0000000000010
//  * 8♣ 2♠ - 3♠ 3♦ Type1223c 1001,1010 0000001000001,0000000000010
//  * 8♠ 2♥ - 3♥ 3♣ Type1223c 1100,0101 0000001000001,0000000000010
//  * 8♦ 2♠ - 3♠ 3♣ Type1223c 1010,1001 0000001000001,0000000000010
//  * 8♠ 2♥ - 3♥ 3♦ Type1223c 1100,0110 0000001000001,0000000000010
//  * 8♣ 2♥ - 3♥ 3♦ Type1223c 0101,0110 0000001000001,0000000000010
//  * 8♥ 2♠ - 3♠ 3♦ Type1223c 1100,1010 0000001000001,0000000000010
//  * 8♦ 2♠ - 3♠ 3♥ Type1223c 1010,1100 0000001000001,0000000000010
//  * 8♣ 2♠ - 3♠ 3♥ Type1223c 1001,1100 0000001000001,0000000000010
//  * 8♦ 2♥ - 3♥ 3♣ Type1223c 0110,0101 0000001000001,0000000000010
//  * 8♥ 2♠ - 3♠ 3♣ Type1223c 1100,1001 0000001000001,0000000000010
//  * 8♥ 2♦ - 3♦ 3♣ Type1223c 0110,0011 0000001000001,0000000000010
//  * 8♠ 2♦ - 3♦ 3♣ Type1223c 1010,0011 0000001000001,0000000000010
