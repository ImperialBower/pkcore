use pkcore::analysis::store::db::headsup_preflop_result::HUPResult;
use pkcore::arrays::matchups::masked::Masked;
use pkcore::Shifty;
use std::str::FromStr;

/// This is our first Masked shift defect case.
///
/// ```txt
/// A♠ J♥ T♠ 8♥
/// Type 6 defect
///
/// Type1212a
/// ...A♠ J♥ (1109112) T♠ 8♥ (595007) ties: (8185)
/// ...A♦ J♠ (1109112) T♦ 8♠ (595007) ties: (8185)
/// ...A♥ J♣ (1109112) T♥ 8♣ (595007) ties: (8185)
/// ...A♦ J♣ (1109112) T♦ 8♣ (595007) ties: (8185)
/// ...A♠ J♦ (1109112) T♠ 8♦ (595007) ties: (8185)
/// ...A♥ J♦ (1109112) T♥ 8♦ (595007) ties: (8185)
/// ...A♠ J♣ (1109112) T♠ 8♣ (595007) ties: (8185)
/// ...A♣ J♥ (1109112) T♣ 8♥ (595007) ties: (8185)
/// ...A♦ J♥ (1109112) T♦ 8♥ (595007) ties: (8185)
/// ...A♣ J♠ (1109112) T♣ 8♠ (595007) ties: (8185)
/// ...A♣ J♦ (1109112) T♣ 8♦ (595007) ties: (8185)
/// ...A♥ J♠ (1109112) T♥ 8♠ (595007) ties: (8185)
///
/// Type1212b
/// ...A♥ J♦ (1109148) T♦ 8♥ (594971) ties: (8185)
/// ...A♠ J♦ (1109148) T♦ 8♠ (594971) ties: (8185)
/// ...A♥ J♠ (1109148) T♠ 8♥ (594971) ties: (8185)
/// ...A♦ J♥ (1109148) T♥ 8♦ (594971) ties: (8185)
/// ...A♠ J♣ (1109148) T♣ 8♠ (594971) ties: (8185)
/// ...A♦ J♠ (1109148) T♠ 8♦ (594971) ties: (8185)
/// ...A♣ J♥ (1109148) T♥ 8♣ (594971) ties: (8185)
/// ...A♣ J♠ (1109148) T♠ 8♣ (594971) ties: (8185)
/// ...A♣ J♦ (1109148) T♦ 8♣ (594971) ties: (8185)
/// ...A♥ J♣ (1109148) T♣ 8♥ (594971) ties: (8185)
/// ...A♦ J♣ (1109148) T♣ 8♦ (594971) ties: (8185)
/// ...A♠ J♥ (1109148) T♥ 8♠ (594971) ties: (8185)
/// ```
fn main() {
    // let case1 = Masked::from_str("A♠ J♥ T♠ 8♥").unwrap();
    let case2 = Masked::from_str("K♠ 7♦ T♠ 3♣").unwrap();

    println!("Auditing Case #1: {case2}");

    let baseline = HUPResult::from(&case2.shu);

    dump(&case2, &baseline);
    println!("=================");
    println!("=================");

    // let conn = Connection::open("generated/hups.db").unwrap();

    for shift in case2.other_shifts() {
        let hupr = HUPResult::from(&shift.shu);
        dump(&case2, &hupr);
    }
}

fn dump(masked: &Masked, hupr: &HUPResult) {
    println!("-----");
    println!("{masked}");
    println!("{hupr}");
}

// Auditing Case #2: K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♦ (1086012) T♠ 3♣ (614275) ties: (12017)
// =================
// =================
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♠ (1086013) T♣ 3♦ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♥ (1086013) T♠ 3♦ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♠ (1074500) T♠ 3♦ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♦ (1086089) T♠ 3♦ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♣ (1074500) T♣ 3♦ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♥ (1074500) T♥ 3♦ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♦ (1086013) T♠ 3♥ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♠ (1074500) T♠ 3♣ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♣ (1074500) T♣ 3♠ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♣ (1086089) T♠ 3♣ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♠ (1074500) T♠ 3♥ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♦ (1074500) T♦ 3♠ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♠ (1086013) T♦ 3♣ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♦ (1074500) T♦ 3♥ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♠ (1086089) T♦ 3♠ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♥ (1086089) T♦ 3♥ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♥ (1086089) T♣ 3♥ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♣ (1086089) T♥ 3♣ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♦ (1086013) T♥ 3♠ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♦ (1074500) T♦ 3♥ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♦ (1086013) T♠ 3♣ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♦ (1086089) T♣ 3♦ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♠ (1086013) T♣ 3♥ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♣ (1086013) T♦ 3♠ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♦ (1086012) T♣ 3♠ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♦ (1086012) T♥ 3♣ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♠ (1086012) T♥ 3♦ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♠ (1086089) T♦ 3♠ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♦ (1074500) T♦ 3♠ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♥ (1086012) T♣ 3♠ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♠ (1086013) T♥ 3♦ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♣ (1086012) T♠ 3♦ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♠ (1086089) T♣ 3♠ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♥ (1086013) T♣ 3♠ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♥ (1086089) T♠ 3♥ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♣ (1074500) T♣ 3♦ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♣ (1086012) T♦ 3♥ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♣ (1074500) T♣ 3♥ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♠ (1086012) T♦ 3♣ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♠ (1086012) T♥ 3♣ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♥ (1086089) T♠ 3♥ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♦ (1086013) T♣ 3♠ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♥ (1086013) T♦ 3♣ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♦ (1086013) T♥ 3♣ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♣ (1074500) T♣ 3♠ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♥ (1086012) T♠ 3♣ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♦ (1086089) T♠ 3♦ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♠ (1086089) T♥ 3♠ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♥ (1086013) T♣ 3♦ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♣ (1086089) T♦ 3♣ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♣ (1086013) T♦ 3♥ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♣ (1086089) T♦ 3♣ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♥ (1086012) T♠ 3♦ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♥ (1074500) T♥ 3♣ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♠ (1086012) T♦ 3♥ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♠ (1086012) T♣ 3♥ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♥ (1086013) T♠ 3♣ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♥ (1086012) T♣ 3♦ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♥ (1074500) T♥ 3♠ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♦ (1086012) T♣ 3♥ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♥ (1074500) T♥ 3♣ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♠ (1074500) T♠ 3♦ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♠ (1074500) T♠ 3♣ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♦ (1086089) T♥ 3♦ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♣ (1086013) T♥ 3♠ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♥ (1086012) T♦ 3♣ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♥ (1086089) T♣ 3♥ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♣ (1086012) T♠ 3♥ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♣ (1086013) T♠ 3♦ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♦ (1074500) T♦ 3♣ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♦ (1086012) T♠ 3♥ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♥ (1074500) T♥ 3♦ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♣ (1086013) T♠ 3♥ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♣ (1074500) T♣ 3♥ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♠ (1086089) T♣ 3♠ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♥ (1074500) T♥ 3♠ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♣ (1086012) T♦ 3♠ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♠ (1074500) T♠ 3♥ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♣ (1086089) T♥ 3♣ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♣ (1086013) T♥ 3♦ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♣ (1086012) T♥ 3♦ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♥ (1086012) T♦ 3♠ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♠ (1086089) T♥ 3♠ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♦ (1086012) T♥ 3♠ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♦ 7♣ (1086089) T♠ 3♣ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♦ (1074500) T♦ 3♣ (625803) ties: (12001)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♠ (1086013) T♦ 3♥ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♦ (1086089) T♣ 3♦ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♠ (1086013) T♥ 3♣ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♦ (1086089) T♥ 3♦ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♦ (1086013) T♣ 3♥ (614710) ties: (11581)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♥ 7♣ (1086012) T♥ 3♠ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♠ (1086012) T♣ 3♦ (614275) ties: (12017)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♣ 7♥ (1086089) T♦ 3♥ (614640) ties: (11575)
// -----
// K♠ 7♦ - T♠ 3♣ Type1223 1010,1001 0100000100000,0000100000010
// K♠ 7♥ (1086013) T♦ 3♠ (614710) ties: (11581)
