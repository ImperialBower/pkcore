use std::str::FromStr;
use pkcore::analysis::store::db::headsup_preflop_result::HUPResult;
use pkcore::arrays::matchups::masked::Masked;
use pkcore::Shifty;

/// This is our first Masked shift defect case.
///
/// A♠ J♥ T♠ 8♥
/// Type 6 defect
///
/// ...A♠ J♥ (1109112) T♠ 8♥ (595007) ties: (8185)
/// ...A♦ J♠ (1109112) T♦ 8♠ (595007) ties: (8185)
/// ...A♥ J♣ (1109112) T♥ 8♣ (595007) ties: (8185)
/// ...A♦ J♣ (1109112) T♦ 8♣ (595007) ties: (8185)
/// ...A♠ J♦ (1109112) T♠ 8♦ (595007) ties: (8185)
/// ...A♥ J♦ (1109112) T♥ 8♦ (595007) ties: (8185)
/// ...A♠ J♣ (1109112) T♠ 8♣ (595007) ties: (8185)
/// ...A♣ J♥ (1109112) T♣ 8♥ (595007) ties: (8185)
/// ...A♦ J♥ (1109112) T♦ 8♥ (595007) ties: (8185)
/// ...A♣ J♠ (1109112) T♣ 8♠ (595007) ties: (8185)
/// ...A♣ J♦ (1109112) T♣ 8♦ (595007) ties: (8185)
/// ...A♥ J♠ (1109112) T♥ 8♠ (595007) ties: (8185)
///
/// ...A♥ J♦ (1109148) T♦ 8♥ (594971) ties: (8185)
/// ...A♠ J♦ (1109148) T♦ 8♠ (594971) ties: (8185)
/// ...A♥ J♠ (1109148) T♠ 8♥ (594971) ties: (8185)
/// ...A♦ J♥ (1109148) T♥ 8♦ (594971) ties: (8185)
/// ...A♠ J♣ (1109148) T♣ 8♠ (594971) ties: (8185)
/// ...A♦ J♠ (1109148) T♠ 8♦ (594971) ties: (8185)
/// ...A♣ J♥ (1109148) T♥ 8♣ (594971) ties: (8185)
/// ...A♣ J♠ (1109148) T♠ 8♣ (594971) ties: (8185)
/// ...A♣ J♦ (1109148) T♦ 8♣ (594971) ties: (8185)
/// ...A♥ J♣ (1109148) T♣ 8♥ (594971) ties: (8185)
/// ...A♦ J♣ (1109148) T♣ 8♦ (594971) ties: (8185)
/// ...A♠ J♥ (1109148) T♥ 8♠ (594971) ties: (8185)
fn main() {
    // let case1 = Masked::from_str("A♠ J♥ T♠ 8♥").unwrap();
    let case2 = Masked::from_str("K♠ 7♦,T♠ 3♣").unwrap();

    println!("Auditing Case #1: {case2}");

    let baseline = HUPResult::from(&case2.shu);

    dump(&case2, &baseline);
    println!("=================");
    println!("=================");

    // let conn = Connection::open("generated/hups.db").unwrap();

    for shift in case2.other_shifts() {
        let hupr = HUPResult::from(&shift.shu);
        dump(&case2, &hupr);
    }
}

fn dump(masked: &Masked, hupr: &HUPResult) {
    println!("-----");
    println!("{masked}");
    println!("{hupr}");
}

// Auditing Case #1: A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// Baseline case:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♠ J♥ (1109112) T♠ 8♥ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♥ J♦ (1109148) T♦ 8♥ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♠ J♦ (1109148) T♦ 8♠ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♦ J♠ (1109112) T♦ 8♠ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♥ J♣ (1109112) T♥ 8♣ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♥ J♠ (1109148) T♠ 8♥ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♦ J♥ (1109148) T♥ 8♦ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♦ J♣ (1109112) T♦ 8♣ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♠ J♣ (1109148) T♣ 8♠ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♠ J♦ (1109112) T♠ 8♦ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♦ J♠ (1109148) T♠ 8♦ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♣ J♥ (1109148) T♥ 8♣ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♥ J♦ (1109112) T♥ 8♦ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♠ J♣ (1109112) T♠ 8♣ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♣ J♥ (1109112) T♣ 8♥ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♣ J♠ (1109148) T♠ 8♣ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♣ J♦ (1109148) T♦ 8♣ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♦ J♥ (1109112) T♦ 8♥ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♣ J♠ (1109112) T♣ 8♠ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♥ J♣ (1109148) T♣ 8♥ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♦ J♣ (1109148) T♣ 8♦ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♠ J♥ (1109148) T♥ 8♠ (594971) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♣ J♦ (1109112) T♣ 8♦ (595007) ties: (8185)
// Failed:
// ...A♠ J♥ - T♠ 8♥ Type1212 1100,1100 1001000000000,0000101000000
// ...A♥ J♠ (1109112) T♥ 8♠ (595007) ties: (8185)